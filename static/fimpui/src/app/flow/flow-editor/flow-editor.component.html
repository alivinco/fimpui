 
<div class="flow-editor">
  
  <button  style = "margin-bottom: 20px;" mat-raised-button [routerLink]="['/flow/overview']">  <mat-icon>chevron_left</mat-icon>  <mat-icon>network_check</mat-icon> Flows </button>
  
<mat-sidenav-container>
  <mat-sidenav #sidenav mode="side" opened="false" style="background-color:beige">
    <!-- sidenav content -->
    <mat-list>
    <mat-list-item><h3> Nodes </h3></mat-list-item> 
    <mat-list-item> <button mat-raised-button (click)="addNode('trigger')"  >Trigger</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('time_trigger')"  >Time trigger</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('action')" >Action</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('receive')" >Receive</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('if')" >If</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('counter')" >Counter</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('wait')" >Wait</button> </mat-list-item>
    <mat-list-item> <button mat-raised-button (click)="addNode('set_variable')" >Set variable</button> </mat-list-item>
    </mat-list>
  </mat-sidenav>

  <mat-card class="flow-editor-main-card">
    <mat-card-header>
      <mat-card-title><h3>Flow editor</h3></mat-card-title>
    </mat-card-header>
    <mat-card-content >
      <mat-input-container class="example-full-width">
              <input matInput [(ngModel)]="flow.Name" placeholder="Name" >
      </mat-input-container>
      <mat-input-container >
              <input style="width: 300px" matInput [(ngModel)]="flow.Description" placeholder="Description" >
      </mat-input-container>
      
      <div id="flowEditorCanvasId" class="drag-area" (drop)="nodeDrop($event)" (dragstart)="nodeDragStart($event)" (dragover)="allowNodeDrop($event)">
          <svg id="flow-connections" class = "connections" ></svg>
          <mat-card id = "nodeId_{{node.Id}}" *ngFor="let node of flow.Nodes;let index = index;trackBy:trackByIndex;" class="node-card" [style.left.px]="node.Ui.x" [style.top.px]="node.Ui.y" draggable="true" >
              <div id = "in_socket_nodeid_{{node.Id}}" *ngIf="node.Type!='trigger' && node.Type!='time_trigger' " class="socket socket-input" (drop)="lineDrop($event)" (dragstart)="lineDragStart($event)" (dragover)="allowLineDrop($event)"></div> 
              <mat-card-header >
                <mat-card-title>{{ node.Label }} ( Id:{{ node.Id }} ) </mat-card-title>
                <mat-card-subtitle>Node type : {{ node.Type }} </mat-card-subtitle>
              </mat-card-header>  
              <mat-card-content>
                <button mat-raised-button (click)="showNodeEditorDialog(flow,node)" color="primary" >Open</button> 
              </mat-card-content> 
                
              <div id = "out_socket_nodeid_succ_{{node.Id}}" *ngIf="node.Type!='if'" class="socket" draggable="true"></div> 
              <div id = "out_socket_nodeid_err_{{node.Id}}" *ngIf="node.Type!='if'" class="socket socket-error" draggable="true"></div> 
              
              <div id = "out_socket_nodeid_iftrue_{{node.Id}}" *ngIf="node.Type=='if'" class="socket" draggable="true"></div> 
              <div id = "out_socket_nodeid_iffalse_{{node.Id}}" *ngIf="node.Type=='if'" class="socket socket-iffalse" draggable="true" ></div> 
              
          </mat-card>
       </div>
    <button mat-mini-fab class="example-fab" (click)="sidenav.toggle()">
    <mat-icon>add</mat-icon>
  </button>
    </mat-card-content>
    
    <mat-card-actions>
      <button mat-raised-button (click)="saveFlow()" color="primary" >Save</button>
      <button mat-raised-button (click)="showSource()" color="primary" >Show source</button>
      <button mat-raised-button (click)="showContextDialog()" color="primary" >Show variables</button>

    </mat-card-actions>
  </mat-card>

 <!-- primary content -->
</mat-sidenav-container>

</div>


