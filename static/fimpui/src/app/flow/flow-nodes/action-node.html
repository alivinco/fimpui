<div>
    <div #nodebody>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
          <mat-panel-title> Service binding </mat-panel-title>
      </mat-expansion-panel-header>       
        <p>
            <mat-input-container style="width: 130px">
                <input matInput [(ngModel)]="node.Service" placeholder="Service">
            </mat-input-container>
            <mat-input-container style="width: 200px">
                <input matInput [(ngModel)]="node.ServiceInterface" placeholder="Interface">
            </mat-input-container>
            <mat-input-container style="width: 450px">
                <input matInput [(ngModel)]="node.Address" placeholder="Address">
            </mat-input-container>
            <button mat-raised-button (click)="serviceLookupDialog(node.Id)" >Lookup</button>
        </p>
    </mat-expansion-panel>    
    <mat-expansion-panel>
            <mat-expansion-panel-header>
                 <mat-panel-title> Payload configuration </mat-panel-title>
            </mat-expansion-panel-header>  
            <mat-select #nodeTypeInput class="value-selector" placeholder="Value type" [(ngModel)]="node.Config.DefaultValue.ValueType">
                <mat-option value="">The same as input </mat-option>
                <mat-option value="string">string</mat-option>
                <mat-option value="bool">bool</mat-option>
                <mat-option value="int">int</mat-option>
                <mat-option value="float">float</mat-option>
                <mat-option value="null">null</mat-option>
                <mat-option value="str_array">array of strings</mat-option>
                <mat-option value="int_array">array of integers</mat-option>
                <mat-option value="float_array">array of floats</mat-option>
                <mat-option value="bool_array">array of floats</mat-option>
                <mat-option value="str_map">map of string</mat-option>
                <mat-option value="int_map">map of integers</mat-option>
                <mat-option value="float_map">map of floats</mat-option>
                <mat-option value="bool_map">map of booleans</mat-option>
                <mat-option value="object">object</mat-option>
            </mat-select>
            <span [ngSwitch]="node.Config.DefaultValue.ValueType">
                    <mat-input-container *ngSwitchCase="'string'" class="node-transition-field">
                        <input matInput [(ngModel)]="node.Config.DefaultValue.Value" placeholder="Default value">
                    </mat-input-container>
                    <mat-input-container *ngSwitchCase="'int'" class="node-transition-field">
                        <input matInput type="number" [(ngModel)]="node.Config.DefaultValue.Value" placeholder="Default value">
                    </mat-input-container>
                    <mat-input-container *ngSwitchCase="'float'" class="node-transition-field">
                        <input matInput type="number" [(ngModel)]="node.Config.DefaultValue.Value" placeholder="Default value">
                    </mat-input-container>
                <span *ngSwitchCase="''">
                </span>
                <mat-radio-group *ngSwitchCase="'bool'" class="example-radio-group" placeholder="Default value" [(ngModel)]="node.Config.DefaultValue.Value">
                        <mat-radio-button class="example-radio-button" [value]="true">
                            true (On)
                        </mat-radio-button>
                        <mat-radio-button class="example-radio-button" [value]="false">
                            false (Off)
                        </mat-radio-button>
                </mat-radio-group>
                <mat-input-container *ngSwitchCase="'str_array'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"   placeholder="Default value : [&quot;abc&quot;,&quot;cde&quot;]">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'int_array'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : [1,2] ">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'float_array'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : [1.2,0.5] ">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'bool_array'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : [true,false]">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'str_map'" class="node-transition-field">
                    <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:&quot;a1&quot;,&quot;b&quot;:&quot;b2&quot;}">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'int_map'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:1,&quot;b&quot;:2}">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'float_map'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:0.5,&quot;b&quot;:1.5}">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'bool_map'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:true,&quot;b&quot;:false}">
                </mat-input-container>
                <mat-input-container *ngSwitchCase="'object'" class="node-transition-field">
                        <input matInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:&quot;b&quot;,&quot;b&quot;:3}">
                </mat-input-container>
            </span>
      
            <p> 
                <mat-select  class="value-selector" (change)="variableSelected($event,node.Config,false)" placeholder="Use flow variable as input" [(ngModel)]="node.Config.VariableName" >
                        <mat-option value = "">Default Input</mat-option>
                        <mat-option *ngFor="let vari of localVars" [value]="vari" >{{vari}}</mat-option>
                </mat-select>
                <mat-select  class="value-selector" (change)="variableSelected($event,node.Config,true)" placeholder="Use shared variable as input" [(ngModel)]="node.Config.VariableName" >
                        <mat-option value = "">Default Input</mat-option>
                        <mat-option *ngFor="let vari of globalVars" [value]="vari" >{{vari}}</mat-option>
                </mat-select>
            </p>  
            <p>
                <mat-input-container class="node-transition-field" style="width:250px">
                    <input matInput [(ngModel)]="propsAsString" (change)="updateProps()"  placeholder="Props format : {&quot;a&quot;:&quot;b&quot;,&quot;b&quot;:3}">
                </mat-input-container>
            </p>

        </mat-expansion-panel>
        </div>
    <p>
        <mat-select #nodeIdInput style="width: 250px;margin-top: 20px" class="value-selector" placeholder="Success node"[(ngModel)]="node.SuccessTransition" >
            <mat-option value = "" > End! </mat-option>
            <mat-option *ngFor="let nod of nodes" [value]="nod.Id" >{{nod.Label}}</mat-option>
        </mat-select>
        <mat-select #nodeIdInput style="width: 250px" class="value-selector" placeholder="Error node"[(ngModel)]="node.ErrorTransition" >
            <mat-option *ngFor="let nod of nodes" [value]="nod.Id" >{{nod.Label}}</mat-option>
        </mat-select>
    </p>
    <p><button mat-raised-button (click)="nodebody.hidden = !nodebody.hidden" >Edit</button> </p>
 
</div>