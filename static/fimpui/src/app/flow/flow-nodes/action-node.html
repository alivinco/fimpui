<div>
    <div #nodebody>
    <md-expansion-panel>
      <md-expansion-panel-header>
          <md-panel-title> Service binding </md-panel-title>
      </md-expansion-panel-header>       
        <p>
            <md-input-container style="width: 130px">
                <input mdInput [(ngModel)]="node.Service" placeholder="Service">
            </md-input-container>
            <md-input-container style="width: 200px">
                <input mdInput [(ngModel)]="node.ServiceInterface" placeholder="Interface">
            </md-input-container>
            <md-input-container style="width: 450px">
                <input mdInput [(ngModel)]="node.Address" placeholder="Address">
            </md-input-container>
            <button md-raised-button (click)="serviceLookupDialog(node.Id)" >Lookup</button>
        </p>
    </md-expansion-panel>    
    <md-expansion-panel>
            <md-expansion-panel-header>
                 <md-panel-title> Payload configuration </md-panel-title>
            </md-expansion-panel-header>  
            <md-select #nodeTypeInput class="value-selector" placeholder="Value type" [(ngModel)]="node.Config.DefaultValue.ValueType">
                <md-option value="">The same as input </md-option>
                <md-option value="string">string</md-option>
                <md-option value="bool">bool</md-option>
                <md-option value="int">int</md-option>
                <md-option value="float">float</md-option>
                <md-option value="null">null</md-option>
                <md-option value="str_array">array of strings</md-option>
                <md-option value="int_array">array of integers</md-option>
                <md-option value="float_array">array of floats</md-option>
                <md-option value="bool_array">array of floats</md-option>
                <md-option value="str_map">map of string</md-option>
                <md-option value="int_map">map of integers</md-option>
                <md-option value="float_map">map of floats</md-option>
                <md-option value="bool_map">map of booleans</md-option>
                <md-option value="object">object</md-option>
            </md-select>
            <span [ngSwitch]="node.Config.DefaultValue.ValueType">
                    <md-input-container *ngSwitchCase="'string'" class="node-transition-field">
                        <input mdInput [(ngModel)]="node.Config.DefaultValue.Value" placeholder="Default value">
                    </md-input-container>
                    <md-input-container *ngSwitchCase="'int'" class="node-transition-field">
                        <input mdInput type="number" [(ngModel)]="node.Config.DefaultValue.Value" placeholder="Default value">
                    </md-input-container>
                    <md-input-container *ngSwitchCase="'float'" class="node-transition-field">
                        <input mdInput type="number" [(ngModel)]="node.Config.DefaultValue.Value" placeholder="Default value">
                    </md-input-container>
                <span *ngSwitchCase="''">
                </span>
                <md-radio-group *ngSwitchCase="'bool'" class="example-radio-group" placeholder="Default value" [(ngModel)]="node.Config.DefaultValue.Value">
                        <md-radio-button class="example-radio-button" [value]="true">
                            true (On)
                        </md-radio-button>
                        <md-radio-button class="example-radio-button" [value]="false">
                            false (Off)
                        </md-radio-button>
                </md-radio-group>
                <md-input-container *ngSwitchCase="'str_array'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"   placeholder="Default value : [&quot;abc&quot;,&quot;cde&quot;]">
                </md-input-container>
                <md-input-container *ngSwitchCase="'int_array'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : [1,2] ">
                </md-input-container>
                <md-input-container *ngSwitchCase="'float_array'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : [1.2,0.5] ">
                </md-input-container>
                <md-input-container *ngSwitchCase="'bool_array'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : [true,false]">
                </md-input-container>
                <md-input-container *ngSwitchCase="'str_map'" class="node-transition-field">
                    <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:&quot;a1&quot;,&quot;b&quot;:&quot;b2&quot;}">
                </md-input-container>
                <md-input-container *ngSwitchCase="'int_map'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:1,&quot;b&quot;:2}">
                </md-input-container>
                <md-input-container *ngSwitchCase="'float_map'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:0.5,&quot;b&quot;:1.5}">
                </md-input-container>
                <md-input-container *ngSwitchCase="'bool_map'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:true,&quot;b&quot;:false}">
                </md-input-container>
                <md-input-container *ngSwitchCase="'object'" class="node-transition-field">
                        <input mdInput [(ngModel)]="complexValueAsString" (change)="updateComplexValue()"  placeholder="Default value : {&quot;a&quot;:&quot;b&quot;,&quot;b&quot;:3}">
                </md-input-container>
            </span>
      
            <p> 
                <md-select  class="value-selector" (change)="variableSelected($event,node.Config,false)" placeholder="Use flow variable as input" [(ngModel)]="node.Config.VariableName" >
                        <md-option value = "">Default Input</md-option>
                        <md-option *ngFor="let vari of localVars" [value]="vari" >{{vari}}</md-option>
                </md-select>
                <md-select  class="value-selector" (change)="variableSelected($event,node.Config,true)" placeholder="Use shared variable as input" [(ngModel)]="node.Config.VariableName" >
                        <md-option value = "">Default Input</md-option>
                        <md-option *ngFor="let vari of globalVars" [value]="vari" >{{vari}}</md-option>
                </md-select>
            </p>  
            <p>
                <md-input-container class="node-transition-field" style="width:250px">
                    <input mdInput [(ngModel)]="propsAsString" (change)="updateProps()"  placeholder="Props format : {&quot;a&quot;:&quot;b&quot;,&quot;b&quot;:3}">
                </md-input-container>
            </p>

        </md-expansion-panel>
        </div>
    <p>
        <md-select #nodeIdInput style="width: 250px;margin-top: 20px" class="value-selector" placeholder="Success node"[(ngModel)]="node.SuccessTransition" >
            <md-option value = "" > End! </md-option>
            <md-option *ngFor="let nod of nodes" [value]="nod.Id" >{{nod.Label}}</md-option>
        </md-select>
        <md-select #nodeIdInput style="width: 250px" class="value-selector" placeholder="Error node"[(ngModel)]="node.ErrorTransition" >
            <md-option *ngFor="let nod of nodes" [value]="nod.Id" >{{nod.Label}}</md-option>
        </md-select>
    </p>
    <p><button md-raised-button (click)="nodebody.hidden = !nodebody.hidden" >Edit</button> </p>
 
</div>